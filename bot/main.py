from pyrogram import Client, filters
from pyrogram.handlers import MessageHandler
from bot.config import API_ID, API_HASH, BOT_TOKEN, ADMINS
from handlers.message_handler import start, handle_video  # ‚úÖ start ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
from handlers.admin.stats import stats_command

app = Client(
    "FileSharingBot",
    api_id=API_ID,
    api_hash=API_HASH,
    bot_token=BOT_TOKEN,
    in_memory=True
)

# ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
app.add_handler(MessageHandler(start, filters.command("start")))  # ‚úÖ start ‡¶è‡¶ñ‡¶® ‡¶°‡¶ø‡¶´‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá
app.add_handler(MessageHandler(handle_video, filters.video))
app.add_handler(MessageHandler(stats_command, filters.command("stats") & filters.user(ADMINS)))

if __name__ == "__main__":
    print("ü§ñ ‡¶¨‡¶ü ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...")
    app.run()
